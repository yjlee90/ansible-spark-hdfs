
spark.master                    yarn
spark.master.rest.enabled       true
spark.history.ui.port            18080
spark.resourceManager.cleanupExpiredHost true
spark.hadoop.yarn.timeline-service.enabled false

# Shuffle service
spark.dynamicAllocation.enabled  true
spark.shuffle.service.enabled    true
spark.scheduler.mode             FAIR
spark.scheduler.pool             fair_pool
spark.scheduler.allocation.file  {{ spark.spark_home }}/conf/fairscheduler.xml


# Driver options
spark.driver.defaultJavaOptions  -XX:OnOutOfMemoryError='kill -9 %p'

# Executor options
spark.executor.defaultJavaOptions -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:OnOutOfMemoryError='kill -9 %p'
spark.executor.extraOptions     -XX:+UseG1GC

# vCpu, Mem
spark.executor.memory                       10g
spark.executor.cores                        6 
spark.driver.memory                         2g
spark.yarn.executor.memoryOverheadFactor    0.1875




############################################
#
#           AWS EMR Settings
#
############################################
# spark.master                     yarn
# spark.driver.extraClassPath      /usr/lib/hadoop-lzo/lib/*:/usr/lib/hadoop/hadoop-aws.jar:/usr/share/aws/aws-java-sdk/*:/usr/share/aws/emr/goodies/lib/emr-spark-goodies.jar:/usr/share/aws/emr/security/conf:/usr/share/aws/emr/security/lib/*:/usr/share/aws/hmclient/lib/aws-glue-datacatalog-spark-client.jar:/usr/share/java/Hive-JSON-Serde/hive-openx-serde.jar:/usr/share/aws/sagemaker-spark-sdk/lib/sagemaker-spark-sdk.jar:/usr/share/aws/emr/s3select/lib/emr-s3-select-spark-connector.jar
# spark.driver.extraLibraryPath    /usr/lib/hadoop/lib/native:/usr/lib/hadoop-lzo/lib/native
# spark.executor.extraClassPath    /usr/lib/hadoop-lzo/lib/*:/usr/lib/hadoop/hadoop-aws.jar:/usr/share/aws/aws-java-sdk/*:/usr/share/aws/emr/goodies/lib/emr-spark-goodies.jar:/usr/share/aws/emr/security/conf:/usr/share/aws/emr/security/lib/*:/usr/share/aws/hmclient/lib/aws-glue-datacatalog-spark-client.jar:/usr/share/java/Hive-JSON-Serde/hive-openx-serde.jar:/usr/share/aws/sagemaker-spark-sdk/lib/sagemaker-spark-sdk.jar:/usr/share/aws/emr/s3select/lib/emr-s3-select-spark-connector.jar
# spark.executor.extraLibraryPath  /usr/lib/hadoop/lib/native:/usr/lib/hadoop-lzo/lib/native
# spark.eventLog.enabled           true
# spark.eventLog.dir               hdfs:///var/log/spark/apps
# spark.history.fs.logDirectory    hdfs:///var/log/spark/apps
# spark.sql.warehouse.dir          hdfs:///user/spark/warehouse
# spark.sql.hive.metastore.sharedPrefixes com.amazonaws.services.dynamodbv2
# spark.yarn.historyServer.address ip-172-31-0-240.ap-northeast-2.compute.internal:18080
# spark.history.ui.port            18080
# spark.shuffle.service.enabled    true
# spark.driver.defaultJavaOptions  -XX:OnOutOfMemoryError='kill -9 %p'
# spark.dynamicAllocation.enabled  true
# spark.blacklist.decommissioning.enabled true
# spark.blacklist.decommissioning.timeout 1h
# spark.resourceManager.cleanupExpiredHost true
# spark.stage.attempt.ignoreOnDecommissionFetchFailure true
# spark.decommissioning.timeout.threshold 20
# spark.executor.defaultJavaOptions -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:OnOutOfMemoryError='kill -9 %p'
# spark.hadoop.yarn.timeline-service.enabled false
# spark.yarn.appMasterEnv.SPARK_PUBLIC_DNS $(hostname -f)
# spark.files.fetchFailure.unRegisterOutputOnHost true
# spark.hadoop.mapreduce.fileoutputcommitter.algorithm.version.emr_internal_use_only.EmrFileSystem 2
# spark.hadoop.mapreduce.fileoutputcommitter.cleanup-failures.ignored.emr_internal_use_only.EmrFileSystem true
# spark.hadoop.fs.s3.getObject.initialSocketTimeoutMilliseconds 2000
# spark.sql.parquet.output.committer.class com.amazon.emr.committer.EmrOptimizedSparkSqlParquetOutputCommitter
# spark.sql.parquet.fs.optimized.committer.optimization-enabled true
# spark.sql.emr.internal.extensions com.amazonaws.emr.spark.EmrSparkSessionExtensions
# spark.executor.memory            18971M
# spark.executor.cores             4
# spark.yarn.executor.memoryOverheadFactor 0.1875
# spark.driver.memory 2048M